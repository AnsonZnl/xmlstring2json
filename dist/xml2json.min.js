"use strict";function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(t){this.xmlString=t,this.cursor=-1,this.error=!1,this.jsonObj={},this.readDeclaration(),this.startReadNode()}function r(t){return t.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}function n(t){var r=new e(t);return r.error?{}:r.toJson()}e.prototype.readDeclaration=function(){this.cursor=this.xmlString.indexOf("?>"),this.xmlString.indexOf("<!DOCTYPE")>-1&&(this.cursor=this.xmlString.indexOf("]>")+2),this.next()},e.prototype.startReadNode=function(){Object.assign(this.jsonObj,this.readNode())},e.prototype.readNode=function(){var t,e,r={},n=/^\s*<(?!\/|!\[CDATA\[)/,i=this.xmlString.indexOf(">",this.cursor),o=this.readTag(this.xmlString.substring(this.cursor,i));return Object.assign(r,o.nodeAttr),t=_defineProperty({},o.nodeName,r),this.cursor=i+1,n.test(this.xmlString.substring(this.cursor,this.cursor+10))&&(this.next(),Object.assign(r,this.readNode())),e=this.readText(o.nodeName),/^\s+$/.test(e)||(r["#text"]=e),n.test(this.xmlString.substring(this.cursor,this.cursor+10))&&(this.next(),this.addChildren(t,this.readNode())),t},e.prototype.readTag=function(t){var e,n={},i=t.split(/\s+/),o=/^([^\s]+)=(['"])?([^\s]+?)(\2)?$/;return e=i.shift(),i.forEach(function(t){var e=t.match(o);n["@"+e[1]]=r(e[3])}),{nodeName:e,nodeAttr:n}},e.prototype.addChildren=function(t,e){var r;for(r in e)t[r]?(t[r]instanceof Array||(t[r]=[t[r]]),t[r].push(e[r])):t[r]=e[r]},e.prototype.readText=function(t){for(var e,n="",i=this.cursor,o=this.xmlString.indexOf("</"+t+">",i),s=-1;(s=this.xmlString.indexOf("<![CDATA[",i))>-1&&s<o;)n+=r(this.xmlString.substring(i,s)),e=this.xmlString.indexOf("]]>",s),n+=this.xmlString.substring(s+9,e),i=e+3,o=this.xmlString.indexOf("</"+t+">",i);return n+=r(this.xmlString.substring(i,o)),this.cursor=o+t.length+3,n},e.prototype.next=function(){var t=this.xmlString.indexOf("<",this.cursor);this.cursor=0===this.xmlString.indexOf("<![CDATA[",t)?this.cursor:t+1},e.prototype.toJson=function(){return this.jsonObj},"function"==typeof define&&define.amd?define(function(){return n}):"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=n:t.xml2json=n}("object"===("undefined"==typeof global?"undefined":_typeof(global))&&global||"object"===("undefined"==typeof window?"undefined":_typeof(window))&&window||void 0);